import numpy as np
import mediapipe as mp
import cv2 as cv
import math 

video = cv.VideoCapture(0)
mp_postura = mp.solutions.pose
mp_desenho_postura = mp.solutions.drawing_utils
postura = mp_postura.Pose()

while True:
    sucesso, frame = video.read()
    if sucesso:
        frame_rgb = cv.cvtColor(frame, cv.COLOR_BGR2RGB)
        results = postura.process(frame_rgb)
        pontos_pose = results.pose_landmarks 
    
        mp_desenho_postura.draw_landmarks(frame, results.pose_landmarks, mp_postura.POSE_CONNECTIONS)
        if pontos_pose:
            for id, coord in enumerate(pontos_pose.landmark):
                if id == 24:
                    coord_cintura_dir_x = coord.x
                    coord_cintura_dir_y= coord.y
                elif id == 12:
                    coord_ombro_direito_x = coord.x
                    coord_ombro_direito_y = coord.y
                elif id == 8:
                    coord_ouvido = coord.x
                elif id == 25:
                    coord_joelho_direito_x = coord.x
                    coord_joelho_direito_y = coord.y
                
            if cv.waitKey(1) == 32:
                break
        cv.imshow("Video", frame)
    else:
        break

video.release()
cv.destroyAllWindows()